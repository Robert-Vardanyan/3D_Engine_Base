# О проекте

Этот проект был создан для понимания 3D проецирования и работы с матрицами для преобразования 2D данных в 3D пространство. В проекте рассматривается построение трёхмерного объекта (куба) в локальной системе координат, определение положения вершин и правильное соединение этих вершин для формирования граней куба. Также проект охватывает процесс проецирования 3D объекта на плоский экран с использованием матриц для перемещения, вращения и проекции, в конечном итоге отображая объект в 2D пространстве, соответствующем разрешению экрана. В процессе выполнения работы рассматриваются шаги по нормализации вершин и обеспечению их попадания в видимую область экрана.

# Введение в теорию

## Мировая система координат (система координат "сцены")
Мы используем левостороннюю систему координат. В этой системе координат ось X направлена вправо, ось Y — вверх, а ось Z — к наблюдателю. Объекты в пространстве определяются точками, которые называются вершинами объекта. Каждая вершина имеет свои координаты (X, Y, Z). Соединяя вершины по заданным граням, мы получаем представление объекта в пространстве.

![1](https://github.com/user-attachments/assets/c8098025-b2ed-492d-9fe3-42ba6f3357d7)

Например, в случае пирамиды каждая её грань — это треугольник, образованный тремя вершинами. Эти треугольники соединяются по ребрам, создавая замкнутую поверхность, представляющую трёхмерный объект.Важно понимать, что каждый объект в мировой системе координат имеет свою локальную систему координат. Все действия с объектом, такие как перемещение или вращение, фактически означают перемещение или вращение его локальной системы координат относительно мировой системы.

![video_1](https://github.com/user-attachments/assets/3a9e6ecb-e6db-4a2c-842b-5fa91940c5b4)

## Основные действия с 3D объектами

-  Перемещение — изменение положения объекта в пространстве.
-  Масштабирование — изменение размера объекта.
-  Вращение — изменение ориентации объекта вокруг осей X, Y, Z.
-  Сдвиг — изменение объекта вдоль определенной оси.

Важный момент, связанный с этими операциями, заключается в том, что вводится использование однородных координат: использование трёх измерений недостаточно, чтобы построить матрицу перемещения размером 3x3, а также невозможно построить матрицу проекций. Поэтому все матрицы манипуляций будут размером 4x4.

## Перемещение

![v1](https://github.com/user-attachments/assets/e8792934-106c-4eb2-bd0c-9217d6f1707c)

## Масштабирование

![v2](https://github.com/user-attachments/assets/77b862f8-670c-4fc4-ac90-d3666490575f)

## Вращение вокруг оси X

![v3](https://github.com/user-attachments/assets/5917817f-363b-4af8-a1d7-b61ec6b02865)

## Вращение вокруг оси Y

![v4](https://github.com/user-attachments/assets/216175a8-97a7-437b-98c8-9cca2455f103)

## Вращение вокруг оси Z

![v5](https://github.com/user-attachments/assets/a451a625-7a09-4e72-b278-14a674f871e7)

## Пример

Нашим объектом будет куб, который мы схематично изобразим в локальной системе координат. Здесь важно задать нумерацию вершин, чтобы правильно построить грани куба, а также определить координаты этих вершин. В общем, для построения любого трёхмерного объекта нам нужно всего лишь знать местоположение его вершин и порядок соединения вершин в гранях.

![2](https://github.com/user-attachments/assets/4371da8c-2de8-4937-8037-86cdbfa4c2eb)

Чтобы спроецировать трёхмерное изображение на плоский экран, нужно понимать, какую часть пространства мы будем проецировать. Для этого используется усечённая пирамида обзора с ближней и дальней плоскостью отсечения. Эта пирамида обзора основывается на параметрах камеры, которые определяют, какая часть сцены попадёт в итоговое изображение. 

![3](https://github.com/user-attachments/assets/9ee82bb4-3328-4717-9754-7b1143c1285c)

Если взглянуть на пространство камеры сверху, становится очевидно, что у камеры должен быть такой параметр, как горизонтальная область видимости, который, как правило, задаётся вручную. Вертикальная область видимости обычно вычисляется на основе горизонтальной области и соотношения размеров заданного разрешения. Система координат камеры характеризуется положением камеры в мировой системе и ориентацией, которую задают векторы, представленные на изображении. Чтобы перейти в систему координат камеры, необходимо переместить мир так, чтобы положение камеры совпало с началом мировой системы координат, а затем повернуть камеру таким образом, чтобы ориентация обеих систем координат совпала.

![4](https://github.com/user-attachments/assets/27964d5e-52c1-4317-89b9-f74605df060c)
![5](https://github.com/user-attachments/assets/5a854dc4-2518-43e9-97c7-45bc88bf4696)

## Шаги

Для первого шага используется матрица перемещения, а для второго — матрица вращения, изображённые на рисунке. Их произведение, в свою очередь, даёт общую матрицу для перехода в пространство камеры.

![6](https://github.com/user-attachments/assets/e0026ca8-680b-47cb-88f2-5a9bbf945abb)

Следующим шагом является переход из пространства камеры в пространство отсечения. Для этого необходимо сформировать матрицу проекции, которую иногда называют матрицей отсечения.

![7](https://github.com/user-attachments/assets/d1cf504b-e4c1-48e6-8538-1f989b8e30f7)

Она формируется на основе математических вычислений, связанных с определением плоскости, на которую нужно спроецировать изображение. Результатом этих вычислений становится вот такая, на первый взгляд, немного пугающая матрица.
 
![8](https://github.com/user-attachments/assets/9ad614cd-8d24-4e7d-94b6-4882710cfc50)

После умножения возникает необходимость нормализовать вершины. Для этого нужно разделить значения координат каждой вершины на величину четвёртой координаты. И это ещё не всё — теперь нужно избавиться от координат, значения которых больше единицы. Такие координаты, если говорить простым языком, не попадают в видимую область экрана.

![9](https://github.com/user-attachments/assets/81ce99a3-4a79-4ffc-ba29-bf2e38955277)

Итак, остаётся крайний шаг: после всех этих манипуляций координаты вершин находятся в нормализованном пространстве отсечения, и теперь их нужно вывести на экран. Для этого воспользуемся удобной матрицей, которая перенесёт координаты вершин объекта в соответствии с нашим разрешением.
 
![10](https://github.com/user-attachments/assets/032d1cdf-a0a8-4e3c-ad15-7e6f2ead21d9)

## Управление

![11](https://github.com/user-attachments/assets/367e9dca-f583-4206-bc7a-6960796eff0e)
